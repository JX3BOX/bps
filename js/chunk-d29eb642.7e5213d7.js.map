{"version":3,"sources":["webpack:///./src/components/collection/collection_single.vue","webpack:///./node_modules/@jx3box/jx3box-editor/service/enum/CollectionPublic.js","webpack:///./src/store/bus.js","webpack:///./src/layout/CollectionLayout.vue","webpack:///./src/components/collection/collection_admin.vue","webpack:///src/components/collection/collection_admin.vue","webpack:///./src/components/collection/collection_admin.vue?b2c3","webpack:///./src/components/collection/collection_admin.vue?32c2","webpack:///src/layout/CollectionLayout.vue","webpack:///./src/layout/CollectionLayout.vue?326b","webpack:///./src/layout/CollectionLayout.vue?40ff","webpack:///src/components/collection/collection_single.vue","webpack:///./src/components/collection/collection_single.vue?60fa","webpack:///./src/components/collection/collection_single.vue?670d","webpack:///./src/components/collection/collection_admin.vue?8732","webpack:///./src/service/helper.js","webpack:///./src/components/collection/collection_single.vue?cec4","webpack:///./src/layout/CollectionLayout.vue?074c","webpack:///./src/utils/dateFormat.js"],"names":["render","_vm","this","_c","_self","attrs","staticClass","collection","url","title","public","_e","_v","_s","_f","user_id","collection_user_info","display_name","dateFormat","created","updated","views","canEdit","edit_link","on","$event","delete_handle","id","description","domProps","resolveImagePath","posts","length","_l","post","key","type","showAvatar","user_avatar","user_nickname","getLink","author_id","staticStyle","staticRenderFns","CollectionPublic","Object","freeze","PRIVATE","PUBLIC","Bus","Vue","scopedSlots","_u","fn","isEditor","onAdminClick","proxy","hasRight","_t","model","value","showDrawer","callback","$$v","expression","modelValue","close","visible","visible_options","option","slot","post_author","pushing","submit","name","props","Boolean","default","prop","event","data","type_options","computed","$route","params","watch","val","loadCollection","mounted","initTypeOptions","methods","$emit","types","__postType","push","label","_this","getCollection","then","res","_this2","updateCollection","mark","JSON","stringify","image","$message","message","finally","component","getAppID","$store","state","User","components","Nav","Side","CollectionAdmin","Comment","CollectionLayout","publish","CollectionPublish","location","href","loading","editLink","_this$collection","_this$collection2","getInfo","uid","immediate","handler","loadData","execStat","getThumbnail","getTypeLabel","timestamp","Date","collection_id","preventDefault","$confirm","confirmButtonText","cancelButtonText","removeCollection","success","$router","_res$data","_this3","postStat","getStat","filters","authorLink","$on","reload","getCollections","$cms","method","concat","$collection_id","put","getSkillWiki","$helper","get","getMenuGroups","keys","mute","getBread","dt","separator","arguments","undefined","polished","year","getFullYear","month","getMonth","date","getDate","str","polish"],"mappings":"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","file":"js/chunk-d29eb642.7e5213d7.js","sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('CollectionLayout',{attrs:{\"has-right\":false}},[_c('div',{staticClass:\"m-collection-single\"},[(!_vm.collection)?_c('el-alert',{attrs:{\"title\":\"该剑三小册不存在或已被删除\",\"type\":\"info\",\"center\":\"\",\"show-icon\":\"\",\"closable\":false}}):[_c('div',{staticClass:\"m-collection-detail-content\"},[_c('div',{staticClass:\"m-collection-detail-header\"},[_c('header',{staticClass:\"m-single-header\"},[_c('div',{staticClass:\"m-single-title\"},[_c('span',{staticClass:\"u-title u-sub-block\",attrs:{\"href\":_vm.url,\"title\":_vm.collection.title}},[(!_vm.collection.public)?_c('i',{staticClass:\"u-private el-icon-lock\",attrs:{\"title\":\"仅自己可见\"}}):_vm._e(),_c('span',{staticClass:\"u-title-text\"},[_vm._v(_vm._s(_vm.collection.title))])])]),_c('div',{staticClass:\"m-single-info\"},[_c('div',{staticClass:\"u-author u-sub-block\"},[_c('i',{staticClass:\"u-author-icon\"},[_c('svg',{attrs:{\"xmlns\":\"http://www.w3.org/2000/svg\",\"viewBox\":\"0 0 12 16\",\"width\":\"12\",\"height\":\"16\",\"aria-hidden\":\"true\",\"fill\":\"#444\",\"svg-inline\":'',\"role\":'presentation',\"focusable\":'false',\"tabindex\":'-1'}},[_c('path',{attrs:{\"fill-rule\":\"evenodd\",\"d\":\"M12 14.002a.998.998 0 01-.998.998H1.001A1 1 0 010 13.999V13c0-2.633 4-4 4-4s.229-.409 0-1c-.841-.62-.944-1.59-1-4 .173-2.413 1.867-3 3-3s2.827.586 3 3c-.056 2.41-.159 3.38-1 4-.229.59 0 1 0 1s4 1.367 4 4v1.002z\"}})])]),_c('a',{staticClass:\"u-name\",attrs:{\"href\":_vm._f(\"authorLink\")(_vm.collection.user_id)}},[_vm._v(_vm._s(_vm.collection.collection_user_info && _vm.collection.collection_user_info.display_name))])]),_c('span',{staticClass:\"u-podate u-sub-block\",attrs:{\"title\":\"发布日期\"}},[_c('i',{staticClass:\"u-icon el-icon-date\"}),_c('time',[_vm._v(_vm._s(_vm.dateFormat(_vm.collection.created)))])]),_c('span',{staticClass:\"u-modate u-sub-block\",attrs:{\"title\":\"最后更新\"}},[_c('i',{staticClass:\"u-icon el-icon-refresh\"}),_c('time',[_vm._v(_vm._s(_vm.dateFormat(_vm.collection.updated)))])]),_c('span',{staticClass:\"u-views u-sub-block\"},[_c('i',{staticClass:\"u-icon el-icon-view\"}),_vm._v(\" \"+_vm._s(_vm.views)+\" \")]),(_vm.canEdit)?_c('a',{staticClass:\"u-edit u-sub-block\",attrs:{\"href\":_vm.edit_link}},[_c('i',{staticClass:\"u-icon-edit el-icon-edit-outline\"}),_c('span',[_vm._v(\"编辑\")])]):_vm._e(),(_vm.canEdit)?_c('a',{staticClass:\"u-delete u-sub-block\",attrs:{\"href\":\"javascript:void(0)\"},on:{\"click\":function($event){return _vm.delete_handle($event, _vm.collection.id)}}},[_c('i',{staticClass:\"u-icon-remove el-icon-delete\"}),_c('span',[_vm._v(\"删除\")])]):_vm._e()])])]),(_vm.collection.description)?[_c('el-divider',{attrs:{\"content-position\":\"left\"}},[_c('i',{staticClass:\"el-icon-collection\"}),_vm._v(\" 小册简介 \")]),_c('div',{staticClass:\"u-description\"},[_c('p',{domProps:{\"innerHTML\":_vm._s(_vm.resolveImagePath(_vm.collection.description))}})])]:_vm._e(),(_vm.collection.posts && _vm.collection.posts.length)?[_c('el-divider',{attrs:{\"content-position\":\"left\"}},[_c('i',{staticClass:\"el-icon-folder\"}),_vm._v(\" 小册文章 \")]),_c('ul',{staticClass:\"u-list\"},_vm._l((_vm.collection.posts),function(post,key){return _c('li',{key:key,staticClass:\"u-item\"},[_c('span',{staticClass:\"u-item-order\"},[_vm._v(_vm._s(key + 1)+\".\")]),(post.type === 'custom')?_c('span',{staticClass:\"u-item-link\"},[_c('i',{staticClass:\"el-icon-link\"}),_vm._v(\"站外链接 \")]):_vm._e(),(post.type !== 'custom' && post.user_id)?_c('a',{staticClass:\"u-item-author\",attrs:{\"target\":\"_blank\",\"href\":_vm._f(\"authorLink\")(post.user_id)}},[_c('img',{staticClass:\"u-avatar\",attrs:{\"src\":_vm.showAvatar(post.user_avatar)}}),_c('span',{staticClass:\"u-nickname\",domProps:{\"textContent\":_vm._s(post.user_nickname)}}),_c('span',{staticClass:\"u-div\"},[_vm._v(\"/\")])]):_vm._e(),_c('a',{staticClass:\"u-item-title\",attrs:{\"target\":\"_blank\",\"href\":post.type === 'custom' ? post.url : _vm.getLink(post.type, post.id)}},[_vm._v(_vm._s(post.title))]),(post.updated)?_c('time',{staticClass:\"u-updated\",domProps:{\"textContent\":_vm._s('最后更新于 ' + _vm.dateFormat(post.updated))}}):_vm._e()])}),0)]:_vm._e()],2),_c('Thx',{staticClass:\"m-thx\",attrs:{\"postId\":_vm.id,\"postType\":\"collection\",\"postTitle\":_vm.title,\"userId\":_vm.author_id,\"adminBoxcoinEnable\":true,\"userBoxcoinEnable\":true,\"client\":\"all\"}}),(_vm.id)?_c('div',{staticClass:\"m-comments\"},[_c('el-divider',{attrs:{\"content-position\":\"left\"}},[_c('span',{staticStyle:{\"color\":\"#999999\"}},[_c('i',{staticClass:\"el-icon-chat-line-square\"}),_vm._v(\" 讨论 \")])]),_c('jx3-comment',{attrs:{\"id\":_vm.id,\"category\":\"collection\"}})],1):_vm._e()]],2)])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","const CollectionPublic = Object.freeze({\n  PRIVATE: 0,\n  PUBLIC: 1,\n\n  all() {\n    return [\n      this.PRIVATE,\n      this.PUBLIC,\n    ]\n  },\n})\n\nexport default CollectionPublic;","import Vue from \"vue\";\nconst Bus = new Vue();\nexport default Bus\n\n// Use like\n// Bus.$emit(事件名,数据);\n// Bus.$on(事件名,data => {});","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',[_c('Header'),_c('Breadcrumb',{attrs:{\"name\":\"剑三小册\",\"slug\":\"collection\",\"root\":\"/collection\",\"publishEnable\":true,\"adminEnable\":false,\"feedbackEnable\":true,\"crumbEnable\":true},scopedSlots:_vm._u([{key:\"op-prepend\",fn:function(){return [(_vm.isEditor)?_c('el-button',{staticClass:\"c-admin-button u-admin\",attrs:{\"type\":\"primary\",\"icon\":\"el-icon-setting\"},on:{\"click\":_vm.onAdminClick}},[_vm._v(\"管理\")]):_vm._e()]},proxy:true}])}),_c('LeftSidebar',{attrs:{\"uid\":_vm.user_id}},[_c('Nav',{staticClass:\"m-nav\",attrs:{\"id\":_vm.id}})],1),_c('Main',{attrs:{\"withoutRight\":!_vm.hasRight}},[_vm._t(\"default\"),_c('RightSidebar',[_c('Side',{staticClass:\"m-extend\",attrs:{\"id\":_vm.id}})],1),_c('Footer')],2),_c('CollectionAdmin',{model:{value:(_vm.showDrawer),callback:function ($$v) {_vm.showDrawer=$$v},expression:\"showDrawer\"}})],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('el-drawer',{staticClass:\"c-admin\",attrs:{\"title\":\"管理面板\",\"visible\":_vm.modelValue,\"before-close\":_vm.close,\"append-to-body\":true,\"modal\":false,\"withHeader\":false}},[_c('div',{staticClass:\"c-admin-wrapper\"},[_c('el-divider',{attrs:{\"content-position\":\"left\"}},[_vm._v(\"可见性变更\")]),_c('el-radio-group',{staticClass:\"c-admin-status\",attrs:{\"size\":\"small\"},model:{value:(_vm.visible),callback:function ($$v) {_vm.visible=$$v},expression:\"visible\"}},_vm._l((_vm.visible_options),function(option,key){return _c('el-radio-button',{key:key,attrs:{\"label\":key}},[_vm._v(_vm._s(option))])}),1),_c('el-divider',{attrs:{\"content-position\":\"left\"}},[_vm._v(\"元信息\")]),_c('div',{staticClass:\"c-admin-title\"},[_c('el-input',{staticClass:\"input-author drawer-item-content\",attrs:{\"placeholder\":\"请输入小册标题\"},model:{value:(_vm.title),callback:function ($$v) {_vm.title=$$v},expression:\"title\"}},[_c('template',{slot:\"prepend\"},[_vm._v(\"标题\")])],2)],1),_c('div',{staticClass:\"c-admin-info\"},[_c('div',{staticClass:\"c-admin-author\"},[_c('el-input',{staticClass:\"input-author drawer-item-content\",attrs:{\"placeholder\":\"请输入作者uid\"},model:{value:(_vm.post_author),callback:function ($$v) {_vm.post_author=$$v},expression:\"post_author\"}},[_c('template',{slot:\"prepend\"},[_vm._v(\"作者\")])],2)],1)]),_c('div',{staticClass:\"c-admin-buttons\"},[_c('el-button',{attrs:{\"type\":\"primary\",\"loading\":_vm.pushing},on:{\"click\":_vm.submit}},[_vm._v(\"提交\")]),_c('el-button',{attrs:{\"type\":\"plain\"},on:{\"click\":_vm.close}},[_vm._v(\"取消\")])],1)],1)])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n    <el-drawer\n        class=\"c-admin\"\n        title=\"管理面板\"\n        :visible=\"modelValue\"\n        :before-close=\"close\"\n        :append-to-body=\"true\"\n        :modal=\"false\"\n        :withHeader=\"false\"\n    >\n        <div class=\"c-admin-wrapper\">\n            <el-divider content-position=\"left\">可见性变更</el-divider>\n            <el-radio-group v-model=\"visible\" size=\"small\" class=\"c-admin-status\">\n                <el-radio-button\n                    v-for=\"(option, key) in visible_options\"\n                    :label=\"key\"\n                    :key=\"key\"\n                >{{ option }}</el-radio-button>\n            </el-radio-group>\n\n            <el-divider content-position=\"left\">元信息</el-divider>\n\n            <div class=\"c-admin-title\">\n                <el-input\n                    v-model=\"title\"\n                    placeholder=\"请输入小册标题\"\n                    class=\"input-author drawer-item-content\"\n                >\n                        <template slot=\"prepend\">标题</template>\n                </el-input>\n            </div>\n\n            <div class=\"c-admin-info\">\n                <div class=\"c-admin-author\">\n                    <el-input\n                        v-model=\"post_author\"\n                        placeholder=\"请输入作者uid\"\n                        class=\"input-author drawer-item-content\"\n                    >\n                        <template slot=\"prepend\">作者</template>\n                </el-input>\n                </div>\n            </div>\n\n            <div class=\"c-admin-buttons\">\n                <el-button type=\"primary\" @click=\"submit\" :loading=\"pushing\">提交</el-button>\n                <el-button type=\"plain\" @click=\"close\">取消</el-button>\n            </div>\n        </div>\n    </el-drawer>\n</template>\n\n<script>\nimport {\n    __postType,\n} from \"@jx3box/jx3box-common/data/jx3box.json\";\nimport { updateCollection, getCollection } from \"@/service/helper\";\nimport Bus from \"@/store/bus\";\nexport default {\n    name: \"CollectionAdmin\",\n    props: {\n        modelValue: {\n            type: Boolean,\n            default: false,\n        },\n    },\n    model: {\n        prop: \"modelValue\",\n        event: \"update:modelValue\",\n    },\n    data() {\n        return {\n            type_options: [],\n            post_author: \"\",\n            visible: 1,\n            title: \"\",\n\n            pushing: false,\n\n            data: {},\n        }\n    },\n    computed: {\n        visible_options() {\n            return {\n                0: \"私有\",\n                1: \"公开\",\n            };\n        },\n        id() {\n            return this.$route.params.id\n        }\n    },\n    watch: {\n        modelValue(val) {\n            if (val) {\n                this.loadCollection();\n            }\n        }\n    },\n    mounted() {\n        this.initTypeOptions();\n    },\n    methods: {\n        close() {\n            this.$emit(\"update:modelValue\", false);\n        },\n        // 加载类型选项\n        initTypeOptions: function () {\n            let types = [];\n            for (let key in __postType) {\n                types.push({\n                    value: key,\n                    label: __postType[key],\n                });\n            }\n            this.type_options = types;\n        },\n        loadCollection() {\n            getCollection(this.id).then(res => {\n                this.data = res.data.data;\n                this.post_author = this.data.user_id;\n                this.visible = this.data.public;\n                this.title = this.data.title;\n            })\n        },\n        submit() {\n            this.pushing = true;\n            updateCollection(this.id, {\n                mark: this.data.mark,\n                description: this.data.description,\n                posts: JSON.stringify(this.data.posts),\n                image: this.data.image,\n                public: this.visible,\n                user_id: ~~this.post_author,\n                title: this.title,\n            }).then(() => {\n                this.$message({\n                    message: \"更新成功\",\n                    type: \"success\",\n                });\n                Bus.$emit(\"updateCollection\");\n            }).finally(() => {\n                this.pushing = false;\n            })\n        }\n    },\n};\n</script>\n\n<style lang=\"less\">\n.c-admin-title {\n    margin-bottom: 20px;\n}\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!../../../node_modules/vue-svg-inline-loader/dist/index.min.js!./collection_admin.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!../../../node_modules/vue-svg-inline-loader/dist/index.min.js!./collection_admin.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./collection_admin.vue?vue&type=template&id=32473ddc&\"\nimport script from \"./collection_admin.vue?vue&type=script&lang=js&\"\nexport * from \"./collection_admin.vue?vue&type=script&lang=js&\"\nimport style0 from \"./collection_admin.vue?vue&type=style&index=0&id=32473ddc&prod&lang=less&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","<template>\n    <div>\n        <Header></Header>\n        <Breadcrumb\n            name=\"剑三小册\"\n            slug=\"collection\"\n            root=\"/collection\"\n            :publishEnable=\"true\"\n            :adminEnable=\"false\"\n            :feedbackEnable=\"true\"\n            :crumbEnable=\"true\"\n        >\n            <template #op-prepend>\n                <el-button\n                    class=\"c-admin-button u-admin\"\n                    type=\"primary\"\n                    icon=\"el-icon-setting\"\n                    @click=\"onAdminClick\"\n                    v-if=\"isEditor\"\n                >管理</el-button>\n            </template>\n        </Breadcrumb>\n        <LeftSidebar :uid=\"user_id\">\n            <Nav :id=\"id\" class=\"m-nav\" />\n        </LeftSidebar>\n        <Main :withoutRight=\"!hasRight\">\n            <slot></slot>\n            <RightSidebar>\n                <Side :id=\"id\" class=\"m-extend\" />\n            </RightSidebar>\n            <Footer></Footer>\n        </Main>\n\n        <CollectionAdmin v-model=\"showDrawer\" />\n    </div>\n</template>\n\n<script>\nimport Nav from \"@/components/single/single_nav.vue\";\nimport Side from \"@/components/single/single_side.vue\";\nimport { getAppIcon, getAppID } from \"@jx3box/jx3box-common/js/utils\";\nimport CollectionAdmin from \"@/components/collection/collection_admin.vue\";\nimport User from \"@jx3box/jx3box-common/js/user\";\n\nexport default {\n    name: \"CollectionLayout\",\n    props: {\n        hasRight: {\n            type: Boolean,\n            default: true,\n        },\n    },\n    data: function () {\n        return {\n            id: getAppID(),\n\n            showDrawer: false,\n        };\n    },\n    computed: {\n        user_id: function () {\n            return this.$store.state.user_id;\n        },\n        isEditor: function () {\n            return User.isEditor();\n        },\n    },\n    methods: {\n        onAdminClick() {\n            this.showDrawer = true;\n        },\n    },\n    components: {\n        Nav,\n        Side,\n        CollectionAdmin,\n    },\n};\n</script>\n\n<style lang=\"less\">\n@import \"~@/assets/css/list.less\";\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!../../node_modules/vue-svg-inline-loader/dist/index.min.js!./CollectionLayout.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!../../node_modules/vue-svg-inline-loader/dist/index.min.js!./CollectionLayout.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./CollectionLayout.vue?vue&type=template&id=628992ee&\"\nimport script from \"./CollectionLayout.vue?vue&type=script&lang=js&\"\nexport * from \"./CollectionLayout.vue?vue&type=script&lang=js&\"\nimport style0 from \"./CollectionLayout.vue?vue&type=style&index=0&id=628992ee&prod&lang=less&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","<template>\n    <CollectionLayout :has-right=\"false\">\n        <div class=\"m-collection-single\">\n            <el-alert\n                v-if=\"!collection\"\n                title=\"该剑三小册不存在或已被删除\"\n                type=\"info\"\n                center\n                show-icon\n                :closable=\"false\"\n            ></el-alert>\n\n            <template v-else>\n                <div class=\"m-collection-detail-content\">\n                    <div class=\"m-collection-detail-header\">\n                        <header class=\"m-single-header\">\n                            <!-- 标题 -->\n                            <div class=\"m-single-title\">\n                                <span class=\"u-title u-sub-block\" :href=\"url\" :title=\"collection.title\">\n                                    <i class=\"u-private el-icon-lock\" v-if=\"!collection.public\" title=\"仅自己可见\"></i>\n                                    <span class=\"u-title-text\">{{ collection.title }}</span>\n                                </span>\n                            </div>\n\n                            <!-- 信息 -->\n                            <div class=\"m-single-info\">\n                                <!-- 用户名 -->\n                                <div class=\"u-author u-sub-block\">\n                                    <i class=\"u-author-icon\">\n                                        <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 12 16\" width=\"12\" height=\"16\" aria-hidden=\"true\" fill=\"#444\" v-bind:svg-inline=\"''\" v-bind:role=\"'presentation'\" v-bind:focusable=\"'false'\" v-bind:tabindex=\"'-1'\"><path fill-rule=\"evenodd\" d=\"M12 14.002a.998.998 0 01-.998.998H1.001A1 1 0 010 13.999V13c0-2.633 4-4 4-4s.229-.409 0-1c-.841-.62-.944-1.59-1-4 .173-2.413 1.867-3 3-3s2.827.586 3 3c-.056 2.41-.159 3.38-1 4-.229.59 0 1 0 1s4 1.367 4 4v1.002z\"/></svg>\n                                    </i>\n                                    <a class=\"u-name\" :href=\"collection.user_id | authorLink\">{{\n                                        collection.collection_user_info && collection.collection_user_info.display_name\n                                    }}</a>\n                                </div>\n\n                                <!-- 发布日期 -->\n                                <span class=\"u-podate u-sub-block\" title=\"发布日期\">\n                                    <i class=\"u-icon el-icon-date\"></i>\n                                    <time>{{ dateFormat(collection.created) }}</time>\n                                </span>\n\n                                <!-- 最后更新 -->\n                                <span class=\"u-modate u-sub-block\" title=\"最后更新\">\n                                    <i class=\"u-icon el-icon-refresh\"></i>\n                                    <time>{{ dateFormat(collection.updated) }}</time>\n                                </span>\n\n                                <!-- 查看次数 -->\n                                <span class=\"u-views u-sub-block\">\n                                    <i class=\"u-icon el-icon-view\"></i>\n                                    {{ views }}\n                                </span>\n\n                                <!-- 编辑 -->\n                                <a class=\"u-edit u-sub-block\" :href=\"edit_link\" v-if=\"canEdit\">\n                                    <i class=\"u-icon-edit el-icon-edit-outline\"></i>\n                                    <span>编辑</span>\n                                </a>\n\n                                <!-- 删除 -->\n                                <a\n                                    href=\"javascript:void(0)\"\n                                    class=\"u-delete u-sub-block\"\n                                    @click=\"delete_handle($event, collection.id)\"\n                                    v-if=\"canEdit\"\n                                >\n                                    <i class=\"u-icon-remove el-icon-delete\"></i>\n                                    <span>删除</span>\n                                </a>\n                            </div>\n                        </header>\n                    </div>\n\n                    <template v-if=\"collection.description\">\n                        <el-divider content-position=\"left\">\n                            <i class=\"el-icon-collection\"></i>\n                            小册简介\n                        </el-divider>\n                        <div class=\"u-description\">\n                            <p v-html=\"resolveImagePath(collection.description)\"></p>\n                        </div>\n                    </template>\n\n                    <template v-if=\"collection.posts && collection.posts.length\">\n                        <el-divider content-position=\"left\">\n                            <i class=\"el-icon-folder\"></i>\n                            小册文章\n                        </el-divider>\n                        <ul class=\"u-list\">\n                            <li class=\"u-item\" v-for=\"(post, key) in collection.posts\" :key=\"key\">\n                                <span class=\"u-item-order\">{{ key + 1 }}.</span>\n                                <span class=\"u-item-link\" v-if=\"post.type === 'custom'\">\n                                    <i class=\"el-icon-link\"></i>站外链接\n                                </span>\n                                <a\n                                    class=\"u-item-author\"\n                                    v-if=\"post.type !== 'custom' && post.user_id\"\n                                    target=\"_blank\"\n                                    :href=\"post.user_id | authorLink\"\n                                >\n                                    <img class=\"u-avatar\" :src=\"showAvatar(post.user_avatar)\" />\n                                    <span class=\"u-nickname\" v-text=\"post.user_nickname\"></span>\n                                    <span class=\"u-div\">/</span>\n                                </a>\n                                <a\n                                    class=\"u-item-title\"\n                                    target=\"_blank\"\n                                    :href=\"post.type === 'custom' ? post.url : getLink(post.type, post.id)\"\n                                    >{{ post.title }}</a\n                                >\n                                <time\n                                    class=\"u-updated\"\n                                    v-if=\"post.updated\"\n                                    v-text=\"'最后更新于 ' + dateFormat(post.updated)\"\n                                ></time>\n                            </li>\n                        </ul>\n                    </template>\n                </div>\n\n                <!-- <div class=\"m-tags\" v-if=\"collection.tags && collection.tags.length\">\n                <div class=\"u-tags-title\">\n                    <i class=\"el-icon-price-tag\"></i>\n                    <span>标签</span>\n                </div>\n                <ul class=\"u-tags\">\n                    <li v-for=\"(tag, key) in collection.tags\" :key=\"key\" v-text=\"tag\" class=\"u-tag\"></li>\n                </ul>\n            </div>-->\n\n                <Thx\n                    class=\"m-thx\"\n                    :postId=\"id\"\n                    postType=\"collection\"\n                    :postTitle=\"title\"\n                    :userId=\"author_id\"\n                    :adminBoxcoinEnable=\"true\"\n                    :userBoxcoinEnable=\"true\"\n                    client=\"all\"\n                />\n\n                <div class=\"m-comments\" v-if=\"id\">\n                    <el-divider content-position=\"left\">\n                        <span style=\"color: #999999\"> <i class=\"el-icon-chat-line-square\"></i> 讨论 </span>\n                    </el-divider>\n                    <jx3-comment :id=\"id\" category=\"collection\" />\n                </div>\n            </template>\n        </div>\n    </CollectionLayout>\n</template>\n\n<script>\nimport Comment from \"@jx3box/jx3box-comment-ui/src/Comment.vue\";\nimport CollectionPublish from \"@jx3box/jx3box-editor/service/enum/CollectionPublic\";\nimport { getCollection, removeCollection } from \"@/service/helper\";\nimport dateFormat from \"@/utils/dateFormat\";\nimport Bus from \"@/store/bus\";\nimport {\n    getThumbnail,\n    getLink,\n    getTypeLabel,\n    authorLink,\n    editLink,\n    showAvatar,\n    resolveImagePath,\n} from \"@jx3box/jx3box-common/js/utils\";\nimport User from \"@jx3box/jx3box-common/js/user.js\";\nimport { getStat, postStat } from \"@jx3box/jx3box-common/js/stat\";\n\nimport CollectionLayout from \"@/layout/CollectionLayout.vue\";\nexport default {\n    name: \"CollectionSingle\",\n    props: [],\n    components: {\n        \"jx3-comment\": Comment,\n        CollectionLayout,\n    },\n    data: function () {\n        return {\n            collection: \"\",\n            publish: CollectionPublish,\n            url: location.href,\n            views: 0,\n            loading: false,\n        };\n    },\n    computed: {\n        edit_link: function () {\n            return editLink(\"collection\", this.collection.id);\n        },\n        id: function () {\n            return this.collection?.id;\n        },\n        author_id: function () {\n            return this.collection?.user_id || 0;\n        },\n        canEdit: function () {\n            return this.author_id == User.getInfo().uid || User.isEditor();\n        },\n        title: function () {\n            return this.collection.title;\n        },\n    },\n    watch: {\n        \"$route.params.id\": {\n            immediate: true,\n            handler(id) {\n                if (id) {\n                    this.loadData(id);\n                    this.execStat(id);\n                }\n            },\n        },\n    },\n    methods: {\n        getThumbnail,\n        getLink,\n        getTypeLabel,\n        showAvatar,\n        resolveImagePath,\n        dateFormat: function (timestamp) {\n            return dateFormat(new Date(timestamp * 1000));\n        },\n        delete_handle($event, collection_id) {\n            $event.preventDefault();\n            this.$confirm(\"确认是否删除该剑三小册？\", \"提示\", {\n                confirmButtonText: \"确定\",\n                cancelButtonText: \"取消\",\n                type: \"warning\",\n            }).then(() => {\n                removeCollection(collection_id).then((data) => {\n                    this.$message.success(\"删除成功\");\n                    this.$router.push({ name: \"collection\" });\n                });\n            });\n        },\n        loadData: function (id) {\n            this.loading = true;\n            getCollection(id)\n                .then((res) => {\n                    this.collection = res?.data?.data || {};\n                    this.$store.state.user_id = this.collection.user_id;\n                })\n                .finally(() => {\n                    this.loading = false;\n                });\n        },\n        execStat: function (id) {\n            postStat(\"collection\", id);\n            getStat(\"collection\", id).then((res) => {\n                this.views = res.data.views || 0;\n            });\n        },\n    },\n    filters: {\n        authorLink,\n    },\n    created: function () {},\n    mounted: function () {\n        Bus.$on(\"updateCollection\", () => {\n            location.reload();\n        });\n    },\n};\n</script>\n\n<style lang=\"less\">\n@import \"~@/assets/css/collection/collection.less\";\n.m-single-header {\n    padding-top: 0;\n}\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!../../../node_modules/vue-svg-inline-loader/dist/index.min.js!./collection_single.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!../../../node_modules/vue-svg-inline-loader/dist/index.min.js!./collection_single.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./collection_single.vue?vue&type=template&id=ea207f80&\"\nimport script from \"./collection_single.vue?vue&type=script&lang=js&\"\nexport * from \"./collection_single.vue?vue&type=script&lang=js&\"\nimport style0 from \"./collection_single.vue?vue&type=style&index=0&id=ea207f80&prod&lang=less&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--11-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--11-oneOf-1-3!../../../node_modules/style-resources-loader/lib/index.js??ref--11-oneOf-1-4!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!../../../node_modules/vue-svg-inline-loader/dist/index.min.js!./collection_admin.vue?vue&type=style&index=0&id=32473ddc&prod&lang=less&\"","import { $helper, $cms } from \"@jx3box/jx3box-common/js/https\";\n\nfunction getCollections(params) {\n    return $cms()({\n        method: \"GET\",\n        url: `/api/cms/post/collection`,\n        params: params,\n    });\n}\n\nfunction removeCollection(collection_id) {\n    return $cms()({\n        method: \"DELETE\",\n        url: `/api/cms/post/collection/${collection_id}`,\n    });\n}\n\nfunction getCollection($collection_id) {\n    return $cms()({\n        method: \"GET\",\n        url: `/api/cms/post/collection/${$collection_id}`\n    });\n}\n\nfunction updateCollection(id, data){\n    return $cms().put(`/api/cms/post/collection/${id}`, data);\n}\n\n// 获取技能百科\nfunction getSkillWiki(type, params) {\n    return $helper().get(`/api/wiki/posts/${type}`, {\n        params\n    });\n}\n\nfunction getMenuGroups(keys) {\n    return $cms({ mute: true }).get(`/api/cms/menu-group`, {\n        params: {\n            key: keys\n        },\n    });\n}\n\n// 公告\nfunction getBread(key) {\n    return $cms({ mute: true }).get(`/api/cms/breadcrumb/${key}`);\n}\n\n\n// 边栏文档\nfunction getMenuGroup(name) {\n    return $cms({ mute: true }).get(`/api/cms/menu-group/${name}`);\n}\n\nexport { getCollection, getSkillWiki, getCollections, removeCollection, updateCollection, getMenuGroups, getMenuGroup, getBread };\n","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--11-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--11-oneOf-1-3!../../../node_modules/style-resources-loader/lib/index.js??ref--11-oneOf-1-4!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!../../../node_modules/vue-svg-inline-loader/dist/index.min.js!./collection_single.vue?vue&type=style&index=0&id=ea207f80&prod&lang=less&\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--11-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../node_modules/less-loader/dist/cjs.js??ref--11-oneOf-1-3!../../node_modules/style-resources-loader/lib/index.js??ref--11-oneOf-1-4!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!../../node_modules/vue-svg-inline-loader/dist/index.min.js!./CollectionLayout.vue?vue&type=style&index=0&id=628992ee&prod&lang=less&\"","/**\n * 简单的日期格式化\n *\n * @param {*} dt Date实例\n * @param {object} opt polished:是否补齐两位,separator:连接分隔符\n */\nfunction dateFormat(dt,separator='-',polished=true){\n    let year = dt.getFullYear()\n    let month = dt.getMonth() + 1\n    let date = dt.getDate()\n    let str = polished ? \n        `${year}${separator}${polish(month)}${separator}${polish(date)}` :\n        `${year}${separator}${month}${separator}${date}`\n    return str\n}\n\nfunction polish(val){\n    return val<10 ? ('0' + val) : val\n}\n\nexport default dateFormat\n"],"sourceRoot":""}