(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2e32021c","chunk-dae356c0"],{"13a0":function(t,a,e){"use strict";e.r(a);var i=function(){var t=this,a=t._self._c;return a("AppLayout",[a("div",{staticClass:"m-collection"},["list"==t.mode?a("List"):a("Single")],1)])},n=[],s=e("793d"),o=(e("ac1f"),e("841c"),e("498a"),function(){var t=this,a=t._self._c;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"m-collection-box"},[a("div",{staticClass:"m-archive-search m-collection-search"},[a("a",{staticClass:"u-publish el-button el-button--primary",attrs:{href:t.publish_link}},[t._v("+ 发布作品")]),a("el-input",{staticClass:"input-with-select",attrs:{placeholder:"请输入搜索内容"},model:{value:t.search,callback:function(a){t.search="string"===typeof a?a.trim():a},expression:"search"}},[a("span",{attrs:{slot:"prepend"},slot:"prepend"},[t._v("关键词")]),a("el-button",{attrs:{slot:"append",icon:"el-icon-search"},slot:"append"})],1)],1),t.data&&t.data.length?a("div",{staticClass:"m-collection-list"},t._l(t.data,(function(t,e){return a("div",{key:e},[a("collection-item",{attrs:{data:t}})],1)})),0):a("el-alert",{staticClass:"m-collection-null",attrs:{title:"没有找到相关条目",type:"info","show-icon":""}}),a("el-pagination",{staticClass:"m-collection-pagination",attrs:{background:"","page-size":t.per,"hide-on-single-page":!0,"current-page":t.page,layout:"total, prev, pager, next, jumper",total:t.total},on:{"update:currentPage":function(a){t.page=a},"update:current-page":function(a){t.page=a},"current-change":t.skipTop}})],1)}),l=[],c=(e("d3b7"),e("85e4")),r=(e("fb6a"),function(){var t=this,a=t._self._c;return a("div",{staticClass:"m-collection-item"},[a("router-link",{staticClass:"u-image",attrs:{to:{name:"collection-single",params:{id:t.data.id}},target:"_blank"}},[a("img",{attrs:{src:t._f("getCover")(t.data.image)}})]),a("div",{staticClass:"u-content"},[a("router-link",{staticClass:"u-title",attrs:{to:{name:"collection-single",params:{id:t.data.id}},target:"_blank"}},[t._v(" "+t._s(t.data.title)+" ")]),a("div",{staticClass:"u-info"},[a("a",{staticClass:"u-user",attrs:{href:t._f("authorLink")(t.data.user_id),target:"_blank"}},[a("img",{staticClass:"u-avatar",attrs:{src:t._f("showAvatar")(t.data.user_avatar)}}),a("span",{staticClass:"u-nickname",domProps:{textContent:t._s(t.data.user_nickname)}})])]),a("div",{staticClass:"u-posts"},[a("el-row",{attrs:{gutter:80}},t._l(t.data.posts.slice(0,8),(function(e,i){return a("el-col",{key:i,attrs:{span:6}},[a("a",{staticClass:"u-post",attrs:{href:"custom"===e.type?e.url:t.getLink(e.type,e.id),target:"_blank"}},[a("i",{staticClass:"el-icon-notebook-2"}),t._v(" "+t._s(e.title)+" ")])])})),1)],1),a("div",{staticClass:"u-meta"},[a("span",{staticClass:"u-updated"},[a("i",{staticClass:"el-icon-refresh"}),t._v(" 最后更新于"+t._s(t.dateFormat(t.data.updated))+" ")])])],1)],1)}),u=[],d=e("65c2"),p=e("fb92"),f={name:"CollectionItem",props:["data"],components:{},data:function(){return{}},computed:{},watch:{},methods:{getLink:c["getLink"],dateFormat:function(t){return Object(p["a"])(new Date(1e3*t))}},filters:{getCover:function(t){return t?Object(c["resolveImagePath"])(t):"".concat(d["__imgPath"],"image/collection/default_cover.png")},authorLink:c["authorLink"],showAvatar:function(t){return Object(c["showAvatar"])(t)}},created:function(){},mounted:function(){}},m=f,h=e("2877"),v=Object(h["a"])(m,r,u,!1,null,null,null),g=v.exports,_=e("73cd"),b={name:"CollectionList",props:[],components:{"collection-item":g},data:function(){return{loading:!1,data:[],page:1,total:1,pages:1,per:10,search:""}},computed:{publish_link:function(){return Object(c["publishLink"])("collection")},params:function(){return{page:this.page,limit:this.per,keyword:this.search}}},methods:{skipTop:function(){window.scrollTo(0,0)},loadData:function(){var t=this;this.loading=!0,Object(_["b"])(this.params).then((function(a){var e,i,n,s;t.data=null===a||void 0===a||null===(e=a.data)||void 0===e||null===(i=e.data)||void 0===i?void 0:i.data,t.total=null===a||void 0===a||null===(n=a.data)||void 0===n||null===(s=n.data)||void 0===s?void 0:s.total})).finally((function(){t.loading=!1}))}},filters:{},watch:{params:{immediate:!0,deep:!0,handler:function(){this.loadData()}}},created:function(){},mounted:function(){}},C=b,k=Object(h["a"])(C,o,l,!1,null,null,null),w=k.exports,x=e("1ce6"),L={name:"Collection",props:[],components:{List:w,Single:x["default"],AppLayout:s["a"]},data:function(){return{}},computed:{mode:function(){var t;return null!==(t=this.$route)&&void 0!==t&&t.params.id?"single":"list"}},watch:{},methods:{},filters:{},created:function(){},mounted:function(){}},y=L,j=(e("7eac"),Object(h["a"])(y,i,n,!1,null,null,null));a["default"]=j.exports},"1ce6":function(t,a,e){"use strict";e.r(a);e("a4d3"),e("e01a");var i=function(){var t=this,a=t._self._c;return a("SingleLayout",{attrs:{"has-right":!1}},[a("div",{staticClass:"m-collection-single"},[t.collection?[a("div",{staticClass:"m-collection-detail-content"},[a("div",{staticClass:"m-collection-detail-header"},[a("header",{staticClass:"m-single-header"},[a("div",{staticClass:"m-single-title"},[a("span",{staticClass:"u-title u-sub-block",attrs:{href:t.url,title:t.collection.title}},[t.collection.public?t._e():a("i",{staticClass:"u-private el-icon-lock",attrs:{title:"仅自己可见"}}),a("span",{staticClass:"u-title-text"},[t._v(t._s(t.collection.title))])])]),a("div",{staticClass:"m-single-info"},[a("div",{staticClass:"u-author u-sub-block"},[a("i",{staticClass:"u-author-icon"},[a("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 12 16",width:"12",height:"16","aria-hidden":"true",fill:"#444","svg-inline":"",role:"presentation",focusable:"false",tabindex:"-1"}},[a("path",{attrs:{"fill-rule":"evenodd",d:"M12 14.002a.998.998 0 01-.998.998H1.001A1 1 0 010 13.999V13c0-2.633 4-4 4-4s.229-.409 0-1c-.841-.62-.944-1.59-1-4 .173-2.413 1.867-3 3-3s2.827.586 3 3c-.056 2.41-.159 3.38-1 4-.229.59 0 1 0 1s4 1.367 4 4v1.002z"}})])]),a("a",{staticClass:"u-name",attrs:{href:t._f("authorLink")(t.collection.user_id)}},[t._v(t._s(t.collection.user_nickname))])]),a("span",{staticClass:"u-podate u-sub-block",attrs:{title:"发布日期"}},[a("i",{staticClass:"u-icon el-icon-date"}),a("time",[t._v(t._s(t.dateFormat(t.collection.created)))])]),a("span",{staticClass:"u-modate u-sub-block",attrs:{title:"最后更新"}},[a("i",{staticClass:"u-icon el-icon-refresh"}),a("time",[t._v(t._s(t.dateFormat(t.collection.updated)))])]),a("span",{staticClass:"u-views u-sub-block"},[a("i",{staticClass:"u-icon el-icon-view"}),t._v(" "+t._s(t.views)+" ")]),t.canEdit?a("a",{staticClass:"u-edit u-sub-block",attrs:{href:t.edit_link}},[a("i",{staticClass:"u-icon-edit el-icon-edit-outline"}),a("span",[t._v("编辑")])]):t._e(),t.canEdit?a("a",{staticClass:"u-delete u-sub-block",attrs:{href:"javascript:void(0)"},on:{click:function(a){return t.delete_handle(a,t.collection.id)}}},[a("i",{staticClass:"u-icon-remove el-icon-delete"}),a("span",[t._v("删除")])]):t._e()])])]),t.collection.description?[a("el-divider",{attrs:{"content-position":"left"}},[a("i",{staticClass:"el-icon-collection"}),t._v(" 小册简介 ")]),a("div",{staticClass:"u-description"},[a("p",{domProps:{innerHTML:t._s(t.resolveImagePath(t.collection.description))}})])]:t._e(),t.collection.posts&&t.collection.posts.length?[a("el-divider",{attrs:{"content-position":"left"}},[a("i",{staticClass:"el-icon-folder"}),t._v(" 小册文章 ")]),a("ul",{staticClass:"u-list"},t._l(t.collection.posts,(function(e,i){return a("li",{key:i,staticClass:"u-item"},[a("span",{staticClass:"u-item-order"},[t._v(t._s(i+1)+".")]),"custom"===e.type?a("span",{staticClass:"u-item-link"},[a("i",{staticClass:"el-icon-link"}),t._v("站外链接 ")]):t._e(),"custom"!==e.type&&e.user_id?a("a",{staticClass:"u-item-author",attrs:{target:"_blank",href:t._f("authorLink")(e.user_id)}},[a("img",{staticClass:"u-avatar",attrs:{src:t.showAvatar(e.user_avatar)}}),a("span",{staticClass:"u-nickname",domProps:{textContent:t._s(e.user_nickname)}}),a("span",{staticClass:"u-div"},[t._v("/")])]):t._e(),a("a",{staticClass:"u-item-title",attrs:{target:"_blank",href:"custom"===e.type?e.url:t.getLink(e.type,e.id)}},[t._v(t._s(e.title))]),e.updated?a("time",{staticClass:"u-updated",domProps:{textContent:t._s("最后更新于 "+t.dateFormat(e.updated))}}):t._e()])})),0)]:t._e()],2),a("Thx",{staticClass:"m-thx",attrs:{postId:t.id,postType:"collection",postTitle:t.title,userId:t.author_id,adminBoxcoinEnable:!0,userBoxcoinEnable:!0,client:"all"}}),t.id?a("div",{staticClass:"m-comments"},[a("el-divider",{attrs:{"content-position":"left"}},[a("span",{staticStyle:{color:"#999999"}},[a("i",{staticClass:"el-icon-chat-line-square"}),t._v(" 讨论 ")])]),a("jx3-comment",{attrs:{id:t.id,category:"collection"}})],1):t._e()]:a("el-alert",{attrs:{title:"该剑三小册不存在或已被删除",type:"info",center:"","show-icon":"",closable:!1}})],2)])},n=[],s=(e("14d9"),e("d3b7"),e("23d8"));const o=Object.freeze({PRIVATE:0,PUBLIC:1,all(){return[this.PRIVATE,this.PUBLIC]}});var l=o,c=e("73cd"),r=e("fb92"),u=e("85e4"),d=e("c9d2"),p=e("9616"),f=e("1dbb"),m={name:"CollectionSingle",props:[],components:{"jx3-comment":s["a"],SingleLayout:f["a"]},data:function(){return{collection:"",publish:l,url:location.href,views:0,loading:!1}},computed:{edit_link:function(){return Object(u["editLink"])("collection",this.collection.id)},id:function(){var t;return null===(t=this.collection)||void 0===t?void 0:t.id},author_id:function(){var t;return(null===(t=this.collection)||void 0===t?void 0:t.user_id)||0},canEdit:function(){return this.author_id==d["a"].getInfo().uid||d["a"].isEditor()},title:function(){return this.collection.title}},watch:{"$route.params.id":{immediate:!0,handler:function(t){t&&(this.loadData(t),this.execStat(t))}}},methods:{getThumbnail:u["getThumbnail"],getLink:u["getLink"],getTypeLabel:u["getTypeLabel"],showAvatar:u["showAvatar"],resolveImagePath:u["resolveImagePath"],dateFormat:function(t){return Object(r["a"])(new Date(1e3*t))},delete_handle:function(t,a){var e=this;t.preventDefault(),this.$confirm("确认是否删除该剑三小册？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(c["f"])(a).then((function(t){e.$message.success(t.message),e.$router.push({name:"collection"})}))}))},loadData:function(t){var a=this;this.loading=!0,Object(c["a"])(t,{post_extra:1}).then((function(t){var e,i;a.collection=(null===t||void 0===t||null===(e=t.data)||void 0===e||null===(i=e.data)||void 0===i?void 0:i.collection)||{},a.$store.state.user_id=a.collection.user_id})).finally((function(){a.loading=!1}))},execStat:function(t){var a=this;Object(p["b"])("collection",t),Object(p["a"])("collection",t).then((function(t){a.views=t.data.views||0}))}},filters:{authorLink:u["authorLink"]},created:function(){},mounted:function(){}},h=m,v=(e("5a10"),e("2877")),g=Object(v["a"])(h,i,n,!1,null,null,null);a["default"]=g.exports},"498a":function(t,a,e){"use strict";var i=e("23e7"),n=e("58a8").trim,s=e("c8d2");i({target:"String",proto:!0,forced:s("trim")},{trim:function(){return n(this)}})},"4a16":function(t,a,e){},"4c54":function(t,a,e){"use strict";e("f0d1")},"5a10":function(t,a,e){"use strict";e("f548")},"793d":function(t,a,e){"use strict";var i=function(){var t=this,a=t._self._c;return a("div",[a("Header"),a("Breadcrumb",{attrs:{name:"职业专栏",slug:"bps",root:"/bps",publishEnable:!1,adminEnable:!1,feedbackEnable:!0,crumbEnable:!0}},[a("Info")],1),a("LeftSidebar",[a("Nav",{staticClass:"m-nav"})],1),a("Main",{attrs:{withoutRight:!0}},[a("div",{staticClass:"m-main"},[a("tabs"),t._t("default")],2),a("Footer")],1)],1)},n=[],s=e("7748"),o=e("a078"),l=e("107b"),c={name:"App",props:[],data:function(){return{}},methods:{},components:{Info:s["a"],Nav:o["a"],tabs:l["a"]}},r=c,u=(e("4c54"),e("2877")),d=Object(u["a"])(r,i,n,!1,null,null,null);a["a"]=d.exports},"7eac":function(t,a,e){"use strict";e("4a16")},c8d2:function(t,a,e){var i=e("5e77").PROPER,n=e("d039"),s=e("5899"),o="​᠎";t.exports=function(t){return n((function(){return!!s[t]()||o[t]()!==o||i&&s[t].name!==t}))}},f0d1:function(t,a,e){},f548:function(t,a,e){},fb92:function(t,a,e){"use strict";e("99af");function i(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"-",e=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],i=t.getFullYear(),s=t.getMonth()+1,o=t.getDate(),l=e?"".concat(i).concat(a).concat(n(s)).concat(a).concat(n(o)):"".concat(i).concat(a).concat(s).concat(a).concat(o);return l}function n(t){return t<10?"0"+t:t}a["a"]=i}}]);
//# sourceMappingURL=chunk-2e32021c.192dad09.js.map