{"version":3,"sources":["webpack:///./src/components/collection/collection_single.vue?8052","webpack:///./src/components/collection/collection_single.vue","webpack:///./node_modules/@jx3box/jx3box-editor/service/enum/CollectionPublic.js","webpack:///./src/layout/CollectionLayout.vue","webpack:///src/layout/CollectionLayout.vue","webpack:///./src/layout/CollectionLayout.vue?326b","webpack:///./src/layout/CollectionLayout.vue?40ff","webpack:///src/components/collection/collection_single.vue","webpack:///./src/components/collection/collection_single.vue?60fa","webpack:///./src/components/collection/collection_single.vue?670d","webpack:///./src/layout/CollectionLayout.vue?b7d1","webpack:///./src/utils/dateFormat.js"],"names":["render","_vm","this","_c","_self","attrs","staticClass","collection","url","title","public","_e","_v","_s","_f","user_id","user_nickname","dateFormat","created","updated","views","canEdit","edit_link","on","$event","delete_handle","id","description","domProps","resolveImagePath","posts","length","_l","post","key","type","showAvatar","user_avatar","getLink","author_id","staticStyle","staticRenderFns","CollectionPublic","Object","freeze","PRIVATE","PUBLIC","hasRight","_t","name","props","Boolean","default","data","getAppID","computed","$store","state","methods","components","Nav","Side","component","Comment","CollectionLayout","publish","CollectionPublish","location","href","loading","editLink","_this$collection","_this$collection2","User","getInfo","uid","isEditor","watch","immediate","handler","loadData","execStat","getThumbnail","getTypeLabel","timestamp","Date","collection_id","_this","preventDefault","$confirm","confirmButtonText","cancelButtonText","then","removeCollection","$message","success","message","$router","push","_this2","getCollection","post_extra","res","_res$data","_res$data$data","finally","_this3","postStat","getStat","filters","authorLink","mounted","dt","separator","arguments","undefined","polished","year","getFullYear","month","getMonth","date","getDate","str","concat","polish","val"],"mappings":"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","file":"js/chunk-fd0da45e.46b9ecb3.js","sourcesContent":["export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--11-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--11-oneOf-1-3!../../../node_modules/style-resources-loader/lib/index.js??ref--11-oneOf-1-4!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!../../../node_modules/vue-svg-inline-loader/dist/index.min.js!./collection_single.vue?vue&type=style&index=0&id=be2ec0b4&prod&lang=less&\"","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('CollectionLayout',{attrs:{\"has-right\":false}},[_c('div',{staticClass:\"m-collection-single\"},[(!_vm.collection)?_c('el-alert',{attrs:{\"title\":\"该剑三小册不存在或已被删除\",\"type\":\"info\",\"center\":\"\",\"show-icon\":\"\",\"closable\":false}}):[_c('div',{staticClass:\"m-collection-detail-content\"},[_c('div',{staticClass:\"m-collection-detail-header\"},[_c('header',{staticClass:\"m-single-header\"},[_c('div',{staticClass:\"m-single-title\"},[_c('span',{staticClass:\"u-title u-sub-block\",attrs:{\"href\":_vm.url,\"title\":_vm.collection.title}},[(!_vm.collection.public)?_c('i',{staticClass:\"u-private el-icon-lock\",attrs:{\"title\":\"仅自己可见\"}}):_vm._e(),_c('span',{staticClass:\"u-title-text\"},[_vm._v(_vm._s(_vm.collection.title))])])]),_c('div',{staticClass:\"m-single-info\"},[_c('div',{staticClass:\"u-author u-sub-block\"},[_c('i',{staticClass:\"u-author-icon\"},[_c('svg',{attrs:{\"xmlns\":\"http://www.w3.org/2000/svg\",\"viewBox\":\"0 0 12 16\",\"width\":\"12\",\"height\":\"16\",\"aria-hidden\":\"true\",\"fill\":\"#444\",\"svg-inline\":'',\"role\":'presentation',\"focusable\":'false',\"tabindex\":'-1'}},[_c('path',{attrs:{\"fill-rule\":\"evenodd\",\"d\":\"M12 14.002a.998.998 0 01-.998.998H1.001A1 1 0 010 13.999V13c0-2.633 4-4 4-4s.229-.409 0-1c-.841-.62-.944-1.59-1-4 .173-2.413 1.867-3 3-3s2.827.586 3 3c-.056 2.41-.159 3.38-1 4-.229.59 0 1 0 1s4 1.367 4 4v1.002z\"}})])]),_c('a',{staticClass:\"u-name\",attrs:{\"href\":_vm._f(\"authorLink\")(_vm.collection.user_id)}},[_vm._v(_vm._s(_vm.collection.user_nickname))])]),_c('span',{staticClass:\"u-podate u-sub-block\",attrs:{\"title\":\"发布日期\"}},[_c('i',{staticClass:\"u-icon el-icon-date\"}),_c('time',[_vm._v(_vm._s(_vm.dateFormat(_vm.collection.created)))])]),_c('span',{staticClass:\"u-modate u-sub-block\",attrs:{\"title\":\"最后更新\"}},[_c('i',{staticClass:\"u-icon el-icon-refresh\"}),_c('time',[_vm._v(_vm._s(_vm.dateFormat(_vm.collection.updated)))])]),_c('span',{staticClass:\"u-views u-sub-block\"},[_c('i',{staticClass:\"u-icon el-icon-view\"}),_vm._v(\" \"+_vm._s(_vm.views)+\" \")]),(_vm.canEdit)?_c('a',{staticClass:\"u-edit u-sub-block\",attrs:{\"href\":_vm.edit_link}},[_c('i',{staticClass:\"u-icon-edit el-icon-edit-outline\"}),_c('span',[_vm._v(\"编辑\")])]):_vm._e(),(_vm.canEdit)?_c('a',{staticClass:\"u-delete u-sub-block\",attrs:{\"href\":\"javascript:void(0)\"},on:{\"click\":function($event){return _vm.delete_handle($event, _vm.collection.id)}}},[_c('i',{staticClass:\"u-icon-remove el-icon-delete\"}),_c('span',[_vm._v(\"删除\")])]):_vm._e()])])]),(_vm.collection.description)?[_c('el-divider',{attrs:{\"content-position\":\"left\"}},[_c('i',{staticClass:\"el-icon-collection\"}),_vm._v(\" 小册简介 \")]),_c('div',{staticClass:\"u-description\"},[_c('p',{domProps:{\"innerHTML\":_vm._s(_vm.resolveImagePath(_vm.collection.description))}})])]:_vm._e(),(_vm.collection.posts && _vm.collection.posts.length)?[_c('el-divider',{attrs:{\"content-position\":\"left\"}},[_c('i',{staticClass:\"el-icon-folder\"}),_vm._v(\" 小册文章 \")]),_c('ul',{staticClass:\"u-list\"},_vm._l((_vm.collection.posts),function(post,key){return _c('li',{key:key,staticClass:\"u-item\"},[_c('span',{staticClass:\"u-item-order\"},[_vm._v(_vm._s(key + 1)+\".\")]),(post.type === 'custom')?_c('span',{staticClass:\"u-item-link\"},[_c('i',{staticClass:\"el-icon-link\"}),_vm._v(\"站外链接 \")]):_vm._e(),(post.type !== 'custom' && post.user_id)?_c('a',{staticClass:\"u-item-author\",attrs:{\"target\":\"_blank\",\"href\":_vm._f(\"authorLink\")(post.user_id)}},[_c('img',{staticClass:\"u-avatar\",attrs:{\"src\":_vm.showAvatar(post.user_avatar)}}),_c('span',{staticClass:\"u-nickname\",domProps:{\"textContent\":_vm._s(post.user_nickname)}}),_c('span',{staticClass:\"u-div\"},[_vm._v(\"/\")])]):_vm._e(),_c('a',{staticClass:\"u-item-title\",attrs:{\"target\":\"_blank\",\"href\":post.type === 'custom' ? post.url : _vm.getLink(post.type, post.id)}},[_vm._v(_vm._s(post.title))]),(post.updated)?_c('time',{staticClass:\"u-updated\",domProps:{\"textContent\":_vm._s('最后更新于 ' + _vm.dateFormat(post.updated))}}):_vm._e()])}),0)]:_vm._e()],2),_c('Thx',{staticClass:\"m-thx\",attrs:{\"postId\":_vm.id,\"postType\":\"collection\",\"postTitle\":_vm.title,\"userId\":_vm.author_id,\"adminBoxcoinEnable\":true,\"userBoxcoinEnable\":true,\"client\":\"all\"}}),(_vm.id)?_c('div',{staticClass:\"m-comments\"},[_c('el-divider',{attrs:{\"content-position\":\"left\"}},[_c('span',{staticStyle:{\"color\":\"#999999\"}},[_c('i',{staticClass:\"el-icon-chat-line-square\"}),_vm._v(\" 讨论 \")])]),_c('jx3-comment',{attrs:{\"id\":_vm.id,\"category\":\"collection\"}})],1):_vm._e()]],2)])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","const CollectionPublic = Object.freeze({\n  PRIVATE: 0,\n  PUBLIC: 1,\n\n  all() {\n    return [\n      this.PRIVATE,\n      this.PUBLIC,\n    ]\n  },\n})\n\nexport default CollectionPublic;","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',[_c('Header'),_c('Breadcrumb',{attrs:{\"name\":\"剑三小册\",\"slug\":\"collection\",\"root\":\"/collection\",\"publishEnable\":true,\"adminEnable\":false,\"feedbackEnable\":true,\"crumbEnable\":true}}),_c('LeftSidebar',{attrs:{\"uid\":_vm.user_id}},[_c('Nav',{staticClass:\"m-nav\",attrs:{\"id\":_vm.id}})],1),_c('Main',{attrs:{\"withoutRight\":!_vm.hasRight}},[_vm._t(\"default\"),_c('RightSidebar',[_c('Side',{staticClass:\"m-extend\",attrs:{\"id\":_vm.id}})],1),_c('Footer')],2)],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n    <div>\n        <Header></Header>\n        <Breadcrumb\n            name=\"剑三小册\"\n            slug=\"collection\"\n            root=\"/collection\"\n            :publishEnable=\"true\"\n            :adminEnable=\"false\"\n            :feedbackEnable=\"true\"\n            :crumbEnable=\"true\"\n        >\n        </Breadcrumb>\n        <LeftSidebar :uid=\"user_id\">\n            <Nav :id=\"id\" class=\"m-nav\" />\n        </LeftSidebar>\n        <Main :withoutRight=\"!hasRight\">\n            <slot></slot>\n            <RightSidebar>\n                <Side :id=\"id\" class=\"m-extend\" />\n            </RightSidebar>\n            <Footer></Footer>\n        </Main>\n    </div>\n</template>\n\n<script>\nimport Nav from \"@/components/single/single_nav.vue\";\nimport Side from \"@/components/single/single_side.vue\";\nimport { getAppIcon, getAppID } from \"@jx3box/jx3box-common/js/utils\";\nexport default {\n    name: \"CollectionLayout\",\n    props: {\n        hasRight: {\n            type: Boolean,\n            default: true,\n        },\n    },\n    data: function () {\n        return {\n            id: getAppID(),\n        };\n    },\n    computed: {\n        user_id: function () {\n            return this.$store.state.user_id;\n        },\n    },\n    methods: {},\n    components: {\n        Nav,\n        Side,\n    },\n};\n</script>\n\n<style lang=\"less\">\n@import \"~@/assets/css/list.less\";\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!../../node_modules/vue-svg-inline-loader/dist/index.min.js!./CollectionLayout.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!../../node_modules/vue-svg-inline-loader/dist/index.min.js!./CollectionLayout.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./CollectionLayout.vue?vue&type=template&id=1f817d6c&\"\nimport script from \"./CollectionLayout.vue?vue&type=script&lang=js&\"\nexport * from \"./CollectionLayout.vue?vue&type=script&lang=js&\"\nimport style0 from \"./CollectionLayout.vue?vue&type=style&index=0&id=1f817d6c&prod&lang=less&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","<template>\n    <CollectionLayout :has-right=\"false\">\n        <div class=\"m-collection-single\">\n            <el-alert\n                v-if=\"!collection\"\n                title=\"该剑三小册不存在或已被删除\"\n                type=\"info\"\n                center\n                show-icon\n                :closable=\"false\"\n            ></el-alert>\n\n            <template v-else>\n                <div class=\"m-collection-detail-content\">\n                    <div class=\"m-collection-detail-header\">\n                        <header class=\"m-single-header\">\n                            <!-- 标题 -->\n                            <div class=\"m-single-title\">\n                                <span class=\"u-title u-sub-block\" :href=\"url\" :title=\"collection.title\">\n                                    <i class=\"u-private el-icon-lock\" v-if=\"!collection.public\" title=\"仅自己可见\"></i>\n                                    <span class=\"u-title-text\">{{ collection.title }}</span>\n                                </span>\n                            </div>\n\n                            <!-- 信息 -->\n                            <div class=\"m-single-info\">\n                                <!-- 用户名 -->\n                                <div class=\"u-author u-sub-block\">\n                                    <i class=\"u-author-icon\">\n                                        <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 12 16\" width=\"12\" height=\"16\" aria-hidden=\"true\" fill=\"#444\" v-bind:svg-inline=\"''\" v-bind:role=\"'presentation'\" v-bind:focusable=\"'false'\" v-bind:tabindex=\"'-1'\"><path fill-rule=\"evenodd\" d=\"M12 14.002a.998.998 0 01-.998.998H1.001A1 1 0 010 13.999V13c0-2.633 4-4 4-4s.229-.409 0-1c-.841-.62-.944-1.59-1-4 .173-2.413 1.867-3 3-3s2.827.586 3 3c-.056 2.41-.159 3.38-1 4-.229.59 0 1 0 1s4 1.367 4 4v1.002z\"/></svg>\n                                    </i>\n                                    <a class=\"u-name\" :href=\"collection.user_id | authorLink\">{{\n                                        collection.user_nickname\n                                    }}</a>\n                                </div>\n\n                                <!-- 发布日期 -->\n                                <span class=\"u-podate u-sub-block\" title=\"发布日期\">\n                                    <i class=\"u-icon el-icon-date\"></i>\n                                    <time>{{ dateFormat(collection.created) }}</time>\n                                </span>\n\n                                <!-- 最后更新 -->\n                                <span class=\"u-modate u-sub-block\" title=\"最后更新\">\n                                    <i class=\"u-icon el-icon-refresh\"></i>\n                                    <time>{{ dateFormat(collection.updated) }}</time>\n                                </span>\n\n                                <!-- 查看次数 -->\n                                <span class=\"u-views u-sub-block\">\n                                    <i class=\"u-icon el-icon-view\"></i>\n                                    {{ views }}\n                                </span>\n\n                                <!-- 编辑 -->\n                                <a class=\"u-edit u-sub-block\" :href=\"edit_link\" v-if=\"canEdit\">\n                                    <i class=\"u-icon-edit el-icon-edit-outline\"></i>\n                                    <span>编辑</span>\n                                </a>\n\n                                <!-- 删除 -->\n                                <a\n                                    href=\"javascript:void(0)\"\n                                    class=\"u-delete u-sub-block\"\n                                    @click=\"delete_handle($event, collection.id)\"\n                                    v-if=\"canEdit\"\n                                >\n                                    <i class=\"u-icon-remove el-icon-delete\"></i>\n                                    <span>删除</span>\n                                </a>\n                            </div>\n                        </header>\n                    </div>\n\n                    <template v-if=\"collection.description\">\n                        <el-divider content-position=\"left\">\n                            <i class=\"el-icon-collection\"></i>\n                            小册简介\n                        </el-divider>\n                        <div class=\"u-description\">\n                            <p v-html=\"resolveImagePath(collection.description)\"></p>\n                        </div>\n                    </template>\n\n                    <template v-if=\"collection.posts && collection.posts.length\">\n                        <el-divider content-position=\"left\">\n                            <i class=\"el-icon-folder\"></i>\n                            小册文章\n                        </el-divider>\n                        <ul class=\"u-list\">\n                            <li class=\"u-item\" v-for=\"(post, key) in collection.posts\" :key=\"key\">\n                                <span class=\"u-item-order\">{{ key + 1 }}.</span>\n                                <span class=\"u-item-link\" v-if=\"post.type === 'custom'\">\n                                    <i class=\"el-icon-link\"></i>站外链接\n                                </span>\n                                <a\n                                    class=\"u-item-author\"\n                                    v-if=\"post.type !== 'custom' && post.user_id\"\n                                    target=\"_blank\"\n                                    :href=\"post.user_id | authorLink\"\n                                >\n                                    <img class=\"u-avatar\" :src=\"showAvatar(post.user_avatar)\" />\n                                    <span class=\"u-nickname\" v-text=\"post.user_nickname\"></span>\n                                    <span class=\"u-div\">/</span>\n                                </a>\n                                <a\n                                    class=\"u-item-title\"\n                                    target=\"_blank\"\n                                    :href=\"post.type === 'custom' ? post.url : getLink(post.type, post.id)\"\n                                    >{{ post.title }}</a\n                                >\n                                <time\n                                    class=\"u-updated\"\n                                    v-if=\"post.updated\"\n                                    v-text=\"'最后更新于 ' + dateFormat(post.updated)\"\n                                ></time>\n                            </li>\n                        </ul>\n                    </template>\n                </div>\n\n                <!-- <div class=\"m-tags\" v-if=\"collection.tags && collection.tags.length\">\n                <div class=\"u-tags-title\">\n                    <i class=\"el-icon-price-tag\"></i>\n                    <span>标签</span>\n                </div>\n                <ul class=\"u-tags\">\n                    <li v-for=\"(tag, key) in collection.tags\" :key=\"key\" v-text=\"tag\" class=\"u-tag\"></li>\n                </ul>\n            </div>-->\n\n                <Thx\n                    class=\"m-thx\"\n                    :postId=\"id\"\n                    postType=\"collection\"\n                    :postTitle=\"title\"\n                    :userId=\"author_id\"\n                    :adminBoxcoinEnable=\"true\"\n                    :userBoxcoinEnable=\"true\"\n                    client=\"all\"\n                />\n\n                <div class=\"m-comments\" v-if=\"id\">\n                    <el-divider content-position=\"left\">\n                        <span style=\"color: #999999\"> <i class=\"el-icon-chat-line-square\"></i> 讨论 </span>\n                    </el-divider>\n                    <jx3-comment :id=\"id\" category=\"collection\" />\n                </div>\n            </template>\n        </div>\n    </CollectionLayout>\n</template>\n\n<script>\nimport Comment from \"@jx3box/jx3box-comment-ui/src/Comment.vue\";\nimport CollectionPublish from \"@jx3box/jx3box-editor/service/enum/CollectionPublic\";\nimport { getCollection, removeCollection } from \"@/service/helper\";\nimport dateFormat from \"@/utils/dateFormat\";\nimport {\n    getThumbnail,\n    getLink,\n    getTypeLabel,\n    authorLink,\n    editLink,\n    showAvatar,\n    resolveImagePath,\n} from \"@jx3box/jx3box-common/js/utils\";\nimport User from \"@jx3box/jx3box-common/js/user.js\";\nimport { getStat, postStat } from \"@jx3box/jx3box-common/js/stat\";\n\nimport CollectionLayout from \"@/layout/CollectionLayout.vue\";\nexport default {\n    name: \"CollectionSingle\",\n    props: [],\n    components: {\n        \"jx3-comment\": Comment,\n        CollectionLayout,\n    },\n    data: function () {\n        return {\n            collection: \"\",\n            publish: CollectionPublish,\n            url: location.href,\n            views: 0,\n            loading: false,\n        };\n    },\n    computed: {\n        edit_link: function () {\n            return editLink(\"collection\", this.collection.id);\n        },\n        id: function () {\n            return this.collection?.id;\n        },\n        author_id: function () {\n            return this.collection?.user_id || 0;\n        },\n        canEdit: function () {\n            return this.author_id == User.getInfo().uid || User.isEditor();\n        },\n        title: function () {\n            return this.collection.title;\n        },\n    },\n    watch: {\n        \"$route.params.id\": {\n            immediate: true,\n            handler(id) {\n                if (id) {\n                    this.loadData(id);\n                    this.execStat(id);\n                }\n            },\n        },\n    },\n    methods: {\n        getThumbnail,\n        getLink,\n        getTypeLabel,\n        showAvatar,\n        resolveImagePath,\n        dateFormat: function (timestamp) {\n            return dateFormat(new Date(timestamp * 1000));\n        },\n        delete_handle($event, collection_id) {\n            $event.preventDefault();\n            this.$confirm(\"确认是否删除该剑三小册？\", \"提示\", {\n                confirmButtonText: \"确定\",\n                cancelButtonText: \"取消\",\n                type: \"warning\",\n            }).then(() => {\n                removeCollection(collection_id).then((data) => {\n                    this.$message.success(data.message);\n                    this.$router.push({ name: \"collection\" });\n                });\n            });\n        },\n        loadData: function (id) {\n            this.loading = true;\n            getCollection(id, {\n                post_extra: 1,\n            })\n                .then((res) => {\n                    this.collection = res?.data?.data?.collection || {};\n                    this.$store.state.user_id = this.collection.user_id;\n                })\n                .finally(() => {\n                    this.loading = false;\n                });\n        },\n        execStat: function (id) {\n            postStat(\"collection\", id);\n            getStat(\"collection\", id).then((res) => {\n                this.views = res.data.views || 0;\n            });\n        },\n    },\n    filters: {\n        authorLink,\n    },\n    created: function () {},\n    mounted: function () {},\n};\n</script>\n\n<style lang=\"less\">\n@import \"~@/assets/css/collection/collection.less\";\n.m-single-header {\n    padding-top: 0;\n}\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!../../../node_modules/vue-svg-inline-loader/dist/index.min.js!./collection_single.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!../../../node_modules/vue-svg-inline-loader/dist/index.min.js!./collection_single.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./collection_single.vue?vue&type=template&id=be2ec0b4&\"\nimport script from \"./collection_single.vue?vue&type=script&lang=js&\"\nexport * from \"./collection_single.vue?vue&type=script&lang=js&\"\nimport style0 from \"./collection_single.vue?vue&type=style&index=0&id=be2ec0b4&prod&lang=less&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--11-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../node_modules/less-loader/dist/cjs.js??ref--11-oneOf-1-3!../../node_modules/style-resources-loader/lib/index.js??ref--11-oneOf-1-4!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!../../node_modules/vue-svg-inline-loader/dist/index.min.js!./CollectionLayout.vue?vue&type=style&index=0&id=1f817d6c&prod&lang=less&\"","/**\n * 简单的日期格式化\n *\n * @param {*} dt Date实例\n * @param {object} opt polished:是否补齐两位,separator:连接分隔符\n */\nfunction dateFormat(dt,separator='-',polished=true){\n    let year = dt.getFullYear()\n    let month = dt.getMonth() + 1\n    let date = dt.getDate()\n    let str = polished ? \n        `${year}${separator}${polish(month)}${separator}${polish(date)}` :\n        `${year}${separator}${month}${separator}${date}`\n    return str\n}\n\nfunction polish(val){\n    return val<10 ? ('0' + val) : val\n}\n\nexport default dateFormat\n"],"sourceRoot":""}